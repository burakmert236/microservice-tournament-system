syntax = "proto3";

package grpc;

option go_package = "github.com/burakmert236/goodswipe-common/generated/grpc";

import "v1/grpc/common.proto";

// Services
service UserService {
  rpc CreateUser(CreateUserRequest) returns (CreateUserResponse);
  rpc GetById(GetUserByIdRequest) returns (GetUserByIdResponse);
  rpc UpdateProgress(UpdateProgressRequest) returns (MessageResponse);
  rpc CollectTournamentReward(CollectTournamentRewardRequest) returns (MessageResponse);

  // Reservation methods for tournament entry
  rpc ReserveCoins(ReserveCoinsRequest) returns (MessageResponse);
  rpc ConfirmReservation(ConfirmReservationRequest) returns (MessageResponse);
  rpc RollbackReservation(RollbackReservationRequest) returns (MessageResponse);
}

// Requests
message CreateUserRequest {
  string display_name = 1;
}

message GetUserByIdRequest {
  string user_id = 1;
}

message UpdateProgressRequest {
  string user_id = 1;
  int32 progress_amount = 2;
}

message CollectTournamentRewardRequest {
  string user_id = 1;
  string tournament_id = 2;
  int32 coin = 3;
}

message ReserveCoinsRequest {
  string user_id = 1;
  int64 amount = 2;
  string tournament_id = 3;
}

message ConfirmReservationRequest {
  string user_id = 1;
  string tournament_id = 2;
}

message RollbackReservationRequest {
  string user_id = 1;
  string tournament_id = 2;
}

// Responses
message CreateUserResponse {
  string user_id = 1;
}

message GetUserByIdResponse {
  string user_id = 1;
	string display_name = 2;
	int32 level = 3;
  int32 coin = 4;
}